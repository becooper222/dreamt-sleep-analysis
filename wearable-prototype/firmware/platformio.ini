; PlatformIO Project Configuration
; ESP32-S3 Sleep Monitor Wearable
;
; Build: pio run
; Upload: pio run --target upload
; Monitor: pio device monitor

[env:esp32-s3-devkitc-1]
platform = espressif32
board = esp32-s3-devkitc-1
framework = arduino
monitor_speed = 115200
upload_speed = 921600

; ESP32-S3 specific settings
board_build.mcu = esp32s3
board_build.f_cpu = 240000000L

; Enable USB CDC for serial output
build_flags = 
    -DARDUINO_USB_CDC_ON_BOOT=1
    -DARDUINO_USB_MODE=1
    -DCORE_DEBUG_LEVEL=3
    -DCONFIG_BT_NIMBLE_ENABLED=1
    ; Memory optimization
    -DBOARD_HAS_PSRAM=0

; Dependencies
lib_deps =
    ; I2C sensor library
    adafruit/Adafruit BusIO@^1.14.5
    ; IMU sensor
    electroniccats/MPU6050@^0.6.0
    ; PPG sensor
    sparkfun/SparkFun MAX3010x Pulse and Proximity Sensor Library@^1.1.2
    ; BLE library (NimBLE for lower memory footprint)
    h2zero/NimBLE-Arduino@^1.4.1
    ; JSON for data formatting
    bblanchon/ArduinoJson@^6.21.3
    ; TensorFlow Lite Micro for on-device inference
    tensorflow/TensorFlowLite_ESP32@^2.4.0

; Extra library options
lib_ldf_mode = deep+

; Build for release (comment out for debug)
; build_type = release

; Partition scheme with more app space
board_build.partitions = default.csv

[env:esp32-s3-zero]
; Waveshare ESP32-S3-Zero specific configuration
extends = env:esp32-s3-devkitc-1
board = esp32-s3-devkitc-1

; Override for Zero's smaller flash if needed
; board_build.flash_size = 4MB

